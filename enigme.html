<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>√âpreuve 3 - Les Gardiens du Chantier</title>
  <link rel="stylesheet" href="styles.css">
  
  <!-- Musique de fond -->
  <audio id="bg-music" loop>
    <source src="enigme2_ost.mp3" type="audio/mpeg">
  </audio>
</head>
<body>

  <!-- LOADER -->
  <div class="page-loader" id="page-loader">
    <div class="loader-content">
      <div class="loader-logo">
        <div class="loader-symbols">
          <span class="loader-symbol circle"></span>
          <span class="loader-symbol triangle"></span>
          <span class="loader-symbol square"></span>
        </div>
      </div>
      <div class="loader-text">√âPREUVE 3 ‚Äî √âNIGME FINALE</div>
      <div class="loader-bar">
        <div class="loader-progress"></div>
      </div>
      <div class="loader-status">Pr√©paration de la mission...</div>
    </div>
  </div>

  <header class="header">
    <a href="#" class="back-btn" id="back-btn">‚Üê Retour</a>
    <div class="header-center">
      <span class="page-badge">√âPREUVE 3</span>
    </div>
    <div class="header-right"></div>
  </header>

  <main class="game-page">
    <div class="game-container game-container-wide">
      <div class="game-header">
        <div class="game-icon-large">üß©</div>
        <h1 class="pink">LES GARDIENS DU CHANTIER</h1>
        <p>D√©chiffrez les 3 √©nigmes pour identifier les m√©tiers qui sauveront la Tour</p>
      </div>

      <div class="game-content">
        <!-- VERROUILL√â -->
        <div class="locked-container hidden" id="locked">
          <div class="locked-box">
            <span class="lock-icon">üîí</span>
            <h3>√âpreuve verrouill√©e</h3>
            <p>Terminez d'abord le quiz pour d√©bloquer l'√©nigme finale.</p>
            <a href="quiz.html" class="btn-primary">ALLER AU QUIZ</a>
          </div>
        </div>

        <div class="game-layout-split" id="enigma-layout" style="display: grid;">
          <div class="game-col-left">
            <div class="mission-briefing-box height-match">
              <div class="briefing-box-header">
                <span class="briefing-box-icon">üìã</span>
                <h3>BRIEFING DE MISSION</h3>
                <span class="briefing-box-tag">√âPREUVE 3</span>
              </div>
              
              <div class="briefing-box-content">
                <div class="mission-context">
                  <h4>üìç MESSAGE DU SABOTEUR</h4>
                  <p>
                    Le saboteur a laiss√© un <strong>message</strong> sur le mur du chantier :
                  </p>
                  <blockquote style="background: rgba(255,107,107,0.1); border-left: 3px solid #ff6b6b; padding: 1rem; margin: 1rem 0; font-style: italic;">
                    "3 m√©tiers peuvent sauver la tour. Trouve-les !"
                  </blockquote>
                </div>

                <div class="mission-objective">
                  <h4>üß© LES 3 √âNIGMES √Ä R√âSOUDRE</h4>
                  <div style="background: rgba(0,0,0,0.2); padding: 0.8rem; border-radius: 8px; margin-bottom: 0.8rem;">
                    <strong>√âNIGME 1</strong><br>
                    <em>"Je construis les murs avec des briques et du ciment.<br>
                    J'utilise une truelle pour √©taler le mortier.<br>
                    Qui suis-je ?"</em><br>
                  </div>
                  <div style="background: rgba(0,0,0,0.2); padding: 0.8rem; border-radius: 8px; margin-bottom: 0.8rem;">
                    <strong>√âNIGME 2</strong><br>
                    <em>"Je m'occupe des c√¢bles et des prises.<br>
                    Gr√¢ce √† moi, la lumi√®re s'allume.<br>
                    Qui suis-je ?"</em><br>
                  </div>
                  <div style="background: rgba(0,0,0,0.2); padding: 0.8rem; border-radius: 8px;">
                    <strong>√âNIGME 3</strong><br>
                    <em>"Je r√©pare les fuites d'eau.<br>
                    J'installe les robinets et les douches.<br>
                    Qui suis-je ?"</em><br>
                  </div>
                </div>

                <div class="mission-rules">
                  <h4>üìú R√àGLES D'ENGAGEMENT</h4>
                  <ul>
                    <li><span class="rule-icon">‚è±Ô∏è</span> R√©solvez les √©nigmes dans le temps imparti</li>
                    <li><span class="rule-icon">ü§ù</span> Collaborez avec votre √©quipe</li>
                    <li><span class="rule-icon">üö´</span> Quitter la page = Mission √©chou√©e</li>
                    <li><span class="rule-icon">üí°</span> Indices disponibles aupr√®s du g√©rant</li>
                  </ul>
                </div>

                <div class="mission-reward">
                  <h4>üéÅ R√âCOMPENSE</h4>
                  <div class="reward-preview">
                    <span class="reward-icon-box">üéÅ</span>
                    <div class="reward-details">
                      <strong>R√©compense myst√®re</strong>
                      <span>√Ä d√©couvrir dans le coffre</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="game-col-right">
            <div class="game-content-inner height-match">
              <div class="timer-section-centered">
                <div class="warning-box" id="warning-box">
                  <span class="warning-icon">‚ö†Ô∏è</span>
                  <p>Une fois le timer lanc√©, si vous quittez la page, l'√©preuve sera automatiquement √©chou√©e !</p>
                </div>

                <div class="timer-container">
                  <div class="timer-display">
                    <span class="timer-num" id="timer-min">05</span>
                    <span class="timer-sep">:</span>
                    <span class="timer-num" id="timer-sec">00</span>
                  </div>
                  <span class="timer-label">TEMPS RESTANT</span>
                </div>

                <button class="btn-primary" id="btn-start">D√âMARRER LE TIMER</button>

                <div class="validation-container hidden" id="validation">
                  <div class="validation-box">
                    <h3>‚è±Ô∏è Temps √©coul√© !</h3>
                    <p>Avez-vous r√©solu l'√©nigme ?</p>
                    <div class="validation-btns">
                      <button class="btn-success" id="btn-yes">OUI, R√âUSSI</button>
                      <button class="btn-fail" id="btn-no">NON, √âCHOU√â</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="result-container-full hidden" id="result">
          <div class="result-box" id="result-box">
            <div class="result-icon" id="result-icon"></div>
            <h3 id="result-title"></h3>
            <p id="result-text"></p>
            <a href="coffre.html" class="btn-primary btn-gold">üèÜ VOIR LE COFFRE</a>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="loader.js"></script>
  <script src="gameState.js"></script>
  <script src="enigme.js"></script>
  <script src="music.js"></script>
</body>
</html>
