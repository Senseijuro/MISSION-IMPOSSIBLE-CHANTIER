<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffre Final - Recompenses</title>
  <link rel="icon" type="image/jpeg" href="assets/images/favicon.jpeg">
  <link rel="stylesheet" href="assets/css/styles.css">
  
  <!-- Musique conditionnelle -->
  <audio id="bg-music" loop>
    <source src="assets/audio/coffre_win.mp3" type="audio/mpeg">
  </audio>
</head>
<body>

  <!-- LOADER -->
  <div class="page-loader" id="page-loader">
    <div class="loader-content">
      <div class="loader-logo">
        <div class="loader-symbols">
          <span class="loader-symbol circle"></span>
          <span class="loader-symbol triangle"></span>
          <span class="loader-symbol square"></span>
        </div>
      </div>
      <div class="loader-text">COFFRE FINAL</div>
      <div class="loader-bar">
        <div class="loader-progress"></div>
      </div>
      <div class="loader-status">Ouverture du coffre...</div>
    </div>
  </div>

  <header class="header">
    <a href="#" class="back-btn" id="back-btn">Retour</a>
    <div class="header-center">
      <span class="page-badge gold">COFFRE FINAL</span>
    </div>
    <div class="header-right"></div>
  </header>

  <main class="game-page">
    <div class="game-container">
      <div class="game-header">
        <div class="game-icon-large">üèÜ</div>
        <h1 class="gold">COFFRE FINAL</h1>
        <p>Recuperez vos recompenses validees</p>
      </div>

      <div class="game-content">
        <div class="coffre-progress">
          <div class="progress-item" id="prog-enigme1">
            <div class="progress-circle">1</div>
            <span>Indices</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-item" id="prog-quiz">
            <div class="progress-circle">2</div>
            <span>Quiz BTP</span>
          </div>
          <div class="progress-line"></div>
          <div class="progress-item" id="prog-enigma">
            <div class="progress-circle">3</div>
            <span>Gardiens</span>
          </div>
        </div>

        <div class="rewards-list">
          <div class="reward-card" id="reward-enigme1" data-game="enigme1">
            <div class="reward-icon">üéÅ</div>
            <div class="reward-info">
              <h3>R√©compense n¬∞1</h3>
              <span class="reward-link">√âpreuve 1 - Les Indices du Saboteur</span>
            </div>
            <div class="reward-status" id="status-enigme1">Verrouill√©</div>
          </div>

          <div class="reward-card" id="reward-quiz" data-game="quiz">
            <div class="reward-icon">üéÅ</div>
            <div class="reward-info">
              <h3>R√©compense n¬∞2</h3>
              <span class="reward-link">√âpreuve 2 - Test de Qualification</span>
            </div>
            <div class="reward-status" id="status-quiz">Verrouill√©</div>
          </div>

          <div class="reward-card" id="reward-enigma" data-game="enigma">
            <div class="reward-icon">üéÅ</div>
            <div class="reward-info">
              <h3>R√©compense n¬∞3</h3>
              <span class="reward-link">√âpreuve 3 - Les Gardiens du Chantier</span>
            </div>
            <div class="reward-status" id="status-enigma">Verrouill√©</div>
          </div>
        </div>

        <!-- Message zone suivante (affich√© quand toutes les √©preuves sont termin√©es) -->
        <div class="next-zone-box hidden" id="next-zone">
          <div class="next-zone-content">
            <span class="next-zone-icon" id="next-zone-icon">üéâ</span>
            <h3 id="next-zone-title">√âPREUVES TERMIN√âES</h3>
            <p id="next-zone-text">R√©sultat de vos √©preuves</p>
            <div class="next-zone-direction">
              <span class="direction-icon">‚û°Ô∏è</span>
              <div class="direction-info">
                <strong>PROCHAINE √âTAPE</strong>
                <p>Rendez-vous √† la <span class="zone-name">ZONE M√âCANIQUE</span></p>
              </div>
            </div>
            <p class="next-zone-instruction">Pr√©sentez-vous au stand pour recevoir vos r√©compenses et continuer l'aventure !</p>
          </div>
        </div>

        <button class="btn-reset" id="btn-reset">Recommencer le jeu</button>
      </div>
    </div>
  </main>

  <div class="modal" id="modal-success">
    <div class="modal-content success">
      <div class="modal-icon">OK</div>
      <h3>FELICITATIONS !</h3>
      <p>Signalez au gerant que vous avez reussi.<br>Vous pouvez recevoir vos prix et continuer.</p>
      <button class="btn-primary" id="btn-close-success">CONTINUER</button>
    </div>
  </div>

  <div class="modal" id="modal-fail">
    <div class="modal-content fail">
      <div class="modal-icon">X</div>
      <h3>RECOMPENSE VERROUILLEE</h3>
      <p id="fail-message">Vous devez reussir l'epreuve pour debloquer cette recompense.</p>
      <button class="btn-primary" id="btn-close-fail">COMPRIS</button>
    </div>
  </div>

  <footer class="footer">
    <p>2026 Lycee Jules Uhry Creil - Destination Apprentissage</p>
  </footer>

  <script src="assets/js/loader.js"></script>
  <script src="assets/js/gameState.js"></script>
  <script src="assets/js/coffre.js"></script>
  <script src="assets/js/music.js"></script>
</body>
</html>
